<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    
    <title>文件上传</title>

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/cover.css" rel="stylesheet">

    <!--[if lt IE 9]>
    <script src="html5shiv.min.js"></script>
    <script src="respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="site-wrapper">
      <div class="site-wrapper-inner">
        <div class="cover-container">
          <div class="masthead clearfix">
            <div class="inner">
              <h3 class="masthead-brand"><a href="/">www.speed.com</a></h3>
            </div>
          </div>

          <div class="inner cover">
			  <h1 class="cover-heading">文件上传<h1>
            <br/>
            <form class="form-inline" role="form" method="get">
              <input type="ip" class="form-control input-lg" name="ip" placeholder="" autofocus>
              <button type="submit" class="btn btn-default btn-lg">选择文件</button>
              <button class="btn btn-default btn-lg" onclick="uploadClick()">上传</button>
            </form>

          </div>

		  <div class="row">
			  <div id="imgs"></div>
		  </div>

          <div class="mastfoot">
            <div class="inner">
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

<script src="/js/jquery-2.1.4.min.js"></script>
<script type="text/javascript">
	function uploadClick() {
		$.ajax({
			url: 'get_img.php?want=img',
			dataType: 'json',
			success: function(data) {
			    img_url = data.img_url;
			    imgHtml = '<div class="col-xs-2">';
			    imgHtml += ' <a href="#" class="thumbnail">';
			    imgHtml += '<img src="' + img_url + '">';
			    imgHtml += '</a>';
			    imgHtml += '</div>';
			    //imgHtml = '<img src="' + img_url + '">';
			    $("#imgs").append(imgHtml);
			}
		});
	}

	$(function () {
		var x = 0;
		var intervalID = setInterval(function () {
			uploadClick();
			if (++x === 6) {
				clearInterval(intervalID);
			}
		}, 2000);
	})
</script>
