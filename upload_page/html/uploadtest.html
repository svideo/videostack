<html lang="zh-CN">
	<head>
    <meta charset="utf-8">
	</head>
	<body>
	　　<form id="upload-form" action="action.php" method="post" enctype="multipart/form-data" >
	　　　　<input type="file" id="upload" name="upload" /> <br />
	　　　　<input type="submit" value="Upload" />
		</form>
		
		上传进度:
		<progress value="0" min="0" max="100" id="uploadprogress"></progress>
	</body>
</html>

<script src="/js/jquery-2.1.4.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){

		$('form').on('submit', function() {
			var formdata = new FormData();		
			formdata.append('upload', $('#upload')[0].files[0]);

			var xhr = new XMLHttpRequest();
			console.log($(this).attr('action'));
			xhr.open('POST', $(this).attr('action'));

			xhr.onload = function() {
				if (xhr.status == 200) {
					alert("上传成功");			
				}
				else {
					alert("上传失败");	
				}
			};

			xhr.upload.onprogress = function (event) {
			　　if (event.lengthComputable) {
			　　　　var complete = (event.loaded / event.total * 100 | 0);
			　　　　var progress = document.getElementById('uploadprogress');
			　　　　progress.value = progress.innerHTML = complete;
			　　}
			};

			xhr.send(formdata);

		});
});
</script>

